2019-08-18 17:44:06,214 INFO it.aqua.fantamercato.FantamercatoApplication [main] Starting FantamercatoApplication on aqua-PC with PID 9348 (D:\eclipse2019ws\fantamercato\target\classes started by aqua in D:\eclipse2019ws\fantamercato)
2019-08-18 17:44:06,218 DEBUG it.aqua.fantamercato.FantamercatoApplication [main] Running with Spring Boot v2.1.7.RELEASE, Spring v5.1.9.RELEASE
2019-08-18 17:44:06,219 INFO it.aqua.fantamercato.FantamercatoApplication [main] No active profile set, falling back to default profiles: default
2019-08-18 17:44:08,036 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2019-08-18 17:44:08,037 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.22]
2019-08-18 17:44:08,215 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2019-08-18 17:44:08,760 INFO org.mongodb.driver.cluster [main] Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
2019-08-18 17:44:08,830 INFO org.mongodb.driver.connection [cluster-ClusterId{value='5d59724831a89224841c4884', description='null'}-localhost:27017] Opened connection [connectionId{localValue:1, serverValue:24}] to localhost:27017
2019-08-18 17:44:08,838 INFO org.mongodb.driver.cluster [cluster-ClusterId{value='5d59724831a89224841c4884', description='null'}-localhost:27017] Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[4, 0, 12]}, minWireVersion=0, maxWireVersion=7, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3931615}
2019-08-18 17:44:10,059 INFO it.aqua.fantamercato.FantamercatoApplication [main] Started FantamercatoApplication in 4.396 seconds (JVM running for 7.063)
2019-08-18 17:44:50,117 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-08-18 17:44:55,794 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. sessionId x15forxb
2019-08-18 17:44:55,795 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] userId: ale
2019-08-18 17:44:55,795 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. ID Utente ale
2019-08-18 17:45:24,297 INFO org.mongodb.driver.connection [clientInboundChannel-7] Opened connection [connectionId{localValue:2, serverValue:25}] to localhost:27017
2019-08-18 17:46:15,115 ERROR org.springframework.web.socket.messaging.StompSubProtocolHandler [http-nio-8080-exec-7] Error publishing SessionDisconnectEvent[sessionId=x15forxb, CloseStatus[code=1000, reason=null]]
java.lang.NullPointerException: null
	at it.aqua.fantamercato.GreetingController.webSockectDisconnect(GreetingController.java:130)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:261)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:179)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:142)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:389)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.afterSessionEnded(StompSubProtocolHandler.java:617)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.clearSession(SubProtocolWebSocketHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.afterConnectionClosed(SubProtocolWebSocketHandler.java:385)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.afterConnectionClosed(WebSocketHandlerDecorator.java:85)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.afterConnectionClosed(LoggingWebSocketHandlerDecorator.java:72)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.afterConnectionClosed(ExceptionWebSocketHandlerDecorator.java:78)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateConnectionClosed(AbstractSockJsSession.java:412)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.afterConnectionClosed(SockJsWebSocketHandler.java:98)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onClose(StandardWebSocketHandlerAdapter.java:144)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:555)
	at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:533)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:347)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:289)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:53)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:853)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1587)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:835)
2019-08-18 17:46:18,838 INFO org.mongodb.driver.connection [RMI TCP Connection(5)-127.0.0.1] Closed connection [connectionId{localValue:2, serverValue:25}] to localhost:27017 because the pool has been closed.
2019-08-18 17:46:30,680 INFO it.aqua.fantamercato.FantamercatoApplication [main] Starting FantamercatoApplication on aqua-PC with PID 8908 (D:\eclipse2019ws\fantamercato\target\classes started by aqua in D:\eclipse2019ws\fantamercato)
2019-08-18 17:46:30,687 DEBUG it.aqua.fantamercato.FantamercatoApplication [main] Running with Spring Boot v2.1.7.RELEASE, Spring v5.1.9.RELEASE
2019-08-18 17:46:30,689 INFO it.aqua.fantamercato.FantamercatoApplication [main] No active profile set, falling back to default profiles: default
2019-08-18 17:46:33,825 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2019-08-18 17:46:33,827 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.22]
2019-08-18 17:46:34,086 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2019-08-18 17:46:34,985 INFO org.mongodb.driver.cluster [main] Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
2019-08-18 17:46:35,119 INFO org.mongodb.driver.connection [cluster-ClusterId{value='5d5972da31a89222cc1d869a', description='null'}-localhost:27017] Opened connection [connectionId{localValue:1, serverValue:26}] to localhost:27017
2019-08-18 17:46:35,139 INFO org.mongodb.driver.cluster [cluster-ClusterId{value='5d5972da31a89222cc1d869a', description='null'}-localhost:27017] Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[4, 0, 12]}, minWireVersion=0, maxWireVersion=7, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=6846301}
2019-08-18 17:46:37,377 INFO it.aqua.fantamercato.FantamercatoApplication [main] Started FantamercatoApplication in 7.34 seconds (JVM running for 8.708)
2019-08-18 17:46:57,843 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-08-18 17:46:58,241 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. sessionId mdnfx2qg
2019-08-18 17:46:58,243 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] userId: ale
2019-08-18 17:46:58,243 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. ID Utente ale
2019-08-18 17:47:01,051 INFO org.mongodb.driver.connection [clientInboundChannel-7] Opened connection [connectionId{localValue:2, serverValue:27}] to localhost:27017
2019-08-18 17:47:15,719 ERROR org.springframework.web.socket.messaging.StompSubProtocolHandler [RMI TCP Connection(3)-127.0.0.1] Error publishing SessionDisconnectEvent[sessionId=mdnfx2qg, CloseStatus[code=1001, reason=null]]
java.lang.NullPointerException: null
	at it.aqua.fantamercato.GreetingController.webSockectDisconnect(GreetingController.java:130)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:261)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:179)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:142)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:389)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.afterSessionEnded(StompSubProtocolHandler.java:617)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.clearSession(SubProtocolWebSocketHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.afterConnectionClosed(SubProtocolWebSocketHandler.java:385)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.afterConnectionClosed(WebSocketHandlerDecorator.java:85)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.afterConnectionClosed(LoggingWebSocketHandlerDecorator.java:72)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.afterConnectionClosed(ExceptionWebSocketHandlerDecorator.java:78)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:222)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:160)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:252)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:277)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:290)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:238)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$300(DefaultLifecycleProcessor.java:53)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:377)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:210)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:128)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1018)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:975)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:260)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:809)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1399)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:827)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:689)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:562)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:796)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:677)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:389)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:676)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:835)
2019-08-18 17:47:15,741 INFO org.mongodb.driver.connection [RMI TCP Connection(3)-127.0.0.1] Closed connection [connectionId{localValue:2, serverValue:27}] to localhost:27017 because the pool has been closed.
2019-08-18 17:48:02,108 INFO it.aqua.fantamercato.FantamercatoApplication [main] Starting FantamercatoApplication on aqua-PC with PID 9448 (D:\eclipse2019ws\fantamercato\target\classes started by aqua in D:\eclipse2019ws\fantamercato)
2019-08-18 17:48:02,112 DEBUG it.aqua.fantamercato.FantamercatoApplication [main] Running with Spring Boot v2.1.7.RELEASE, Spring v5.1.9.RELEASE
2019-08-18 17:48:02,114 INFO it.aqua.fantamercato.FantamercatoApplication [main] No active profile set, falling back to default profiles: default
2019-08-18 17:48:07,964 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2019-08-18 17:48:07,966 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.22]
2019-08-18 17:48:08,422 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2019-08-18 17:48:10,183 INFO org.mongodb.driver.cluster [main] Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
2019-08-18 17:48:10,299 INFO org.mongodb.driver.connection [cluster-ClusterId{value='5d59733a31a89224e82130b5', description='null'}-localhost:27017] Opened connection [connectionId{localValue:1, serverValue:28}] to localhost:27017
2019-08-18 17:48:10,316 INFO org.mongodb.driver.cluster [cluster-ClusterId{value='5d59733a31a89224e82130b5', description='null'}-localhost:27017] Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[4, 0, 12]}, minWireVersion=0, maxWireVersion=7, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=6435782}
2019-08-18 17:48:11,953 INFO it.aqua.fantamercato.FantamercatoApplication [main] Started FantamercatoApplication in 11.077 seconds (JVM running for 13.601)
2019-08-18 17:48:23,260 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-3] Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-08-18 17:48:23,496 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. sessionId 22tdeiu3
2019-08-18 17:48:23,497 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] userId: ale
2019-08-18 17:48:23,497 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. ID Utente ale
2019-08-18 17:48:27,076 DEBUG it.aqua.fantamercato.GreetingController [clientInboundChannel-7] prima
2019-08-18 17:48:27,125 INFO org.mongodb.driver.connection [clientInboundChannel-7] Opened connection [connectionId{localValue:2, serverValue:29}] to localhost:27017
2019-08-18 17:48:27,150 DEBUG it.aqua.fantamercato.GreetingController [clientInboundChannel-7] dopo
2019-08-18 17:48:45,709 ERROR org.springframework.web.socket.messaging.StompSubProtocolHandler [http-nio-8080-exec-8] Error publishing SessionDisconnectEvent[sessionId=22tdeiu3, CloseStatus[code=1000, reason=null]]
java.lang.NullPointerException: null
	at it.aqua.fantamercato.GreetingController.webSockectDisconnect(GreetingController.java:132)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:261)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:179)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:142)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:389)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.afterSessionEnded(StompSubProtocolHandler.java:617)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.clearSession(SubProtocolWebSocketHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.afterConnectionClosed(SubProtocolWebSocketHandler.java:385)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.afterConnectionClosed(WebSocketHandlerDecorator.java:85)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.afterConnectionClosed(LoggingWebSocketHandlerDecorator.java:72)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.afterConnectionClosed(ExceptionWebSocketHandlerDecorator.java:78)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateConnectionClosed(AbstractSockJsSession.java:412)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.afterConnectionClosed(SockJsWebSocketHandler.java:98)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onClose(StandardWebSocketHandlerAdapter.java:144)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:555)
	at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:533)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:347)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:289)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:53)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:853)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1587)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:835)
2019-08-18 18:03:32,113 INFO org.mongodb.driver.connection [RMI TCP Connection(18)-127.0.0.1] Closed connection [connectionId{localValue:2, serverValue:29}] to localhost:27017 because the pool has been closed.
2019-08-18 18:04:10,334 INFO it.aqua.fantamercato.FantamercatoApplication [main] Starting FantamercatoApplication on aqua-PC with PID 9104 (D:\eclipse2019ws\fantamercato\target\classes started by aqua in D:\eclipse2019ws\fantamercato)
2019-08-18 18:04:10,337 DEBUG it.aqua.fantamercato.FantamercatoApplication [main] Running with Spring Boot v2.1.7.RELEASE, Spring v5.1.9.RELEASE
2019-08-18 18:04:10,338 INFO it.aqua.fantamercato.FantamercatoApplication [main] No active profile set, falling back to default profiles: default
2019-08-18 18:04:11,780 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2019-08-18 18:04:11,781 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.22]
2019-08-18 18:04:11,923 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2019-08-18 18:04:12,379 INFO org.mongodb.driver.cluster [main] Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
2019-08-18 18:04:12,463 INFO org.mongodb.driver.connection [cluster-ClusterId{value='5d5976fc31a89223904c7326', description='null'}-localhost:27017] Opened connection [connectionId{localValue:1, serverValue:34}] to localhost:27017
2019-08-18 18:04:12,470 INFO org.mongodb.driver.cluster [cluster-ClusterId{value='5d5976fc31a89223904c7326', description='null'}-localhost:27017] Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[4, 0, 12]}, minWireVersion=0, maxWireVersion=7, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3757590}
2019-08-18 18:04:13,341 INFO it.aqua.fantamercato.FantamercatoApplication [main] Started FantamercatoApplication in 3.412 seconds (JVM running for 4.35)
2019-08-18 18:05:05,793 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-08-18 18:05:09,369 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. sessionId 1zkoydf4
2019-08-18 18:05:09,369 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] userId: ale
2019-08-18 18:05:09,369 DEBUG it.aqua.fantamercato.GreetingController [clientOutboundChannel-1] Connessione websocket stabilita. ID Utente ale
2019-08-18 18:05:14,467 DEBUG it.aqua.fantamercato.GreetingController [clientInboundChannel-7] prima
2019-08-18 18:05:14,502 INFO org.mongodb.driver.connection [clientInboundChannel-7] Opened connection [connectionId{localValue:2, serverValue:35}] to localhost:27017
2019-08-18 18:05:14,531 DEBUG it.aqua.fantamercato.GreetingController [clientInboundChannel-7] dopo
2019-08-18 18:05:58,038 ERROR org.springframework.web.socket.messaging.StompSubProtocolHandler [http-nio-8080-exec-8] Error publishing SessionDisconnectEvent[sessionId=1zkoydf4, CloseStatus[code=1000, reason=null]]
java.lang.NullPointerException: null
	at it.aqua.fantamercato.GreetingController.webSockectDisconnect(GreetingController.java:133)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:261)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:179)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:142)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:389)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.afterSessionEnded(StompSubProtocolHandler.java:617)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.clearSession(SubProtocolWebSocketHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.afterConnectionClosed(SubProtocolWebSocketHandler.java:385)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.afterConnectionClosed(WebSocketHandlerDecorator.java:85)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.afterConnectionClosed(LoggingWebSocketHandlerDecorator.java:72)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.afterConnectionClosed(ExceptionWebSocketHandlerDecorator.java:78)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateConnectionClosed(AbstractSockJsSession.java:412)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.afterConnectionClosed(SockJsWebSocketHandler.java:98)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onClose(StandardWebSocketHandlerAdapter.java:144)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:555)
	at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:533)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:347)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:289)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:53)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:853)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1587)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:835)
2019-08-18 18:06:00,274 INFO org.mongodb.driver.connection [RMI TCP Connection(4)-127.0.0.1] Closed connection [connectionId{localValue:2, serverValue:35}] to localhost:27017 because the pool has been closed.
